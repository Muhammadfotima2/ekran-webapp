<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EKRAN.TJ-KBS –ö–∞—Ç–∞–ª–æ–≥</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      background: linear-gradient(to right, #4facfe, #00f2fe);
      font-family: 'Segoe UI', sans-serif;
      color: #fff;
      text-align: center;
      padding: 20px;
    }
    h1 {
      font-size: 30px;
      margin-bottom: 20px;
    }
    .btn {
      padding: 12px 20px;
      margin: 8px;
      font-size: 18px;
      background: #fff;
      color: #4facfe;
      border: none;
      border-radius: 12px;
      cursor: pointer;
    }
    .btn:hover {
      background: #ecf0f1;
    }
    .card {
      background: rgba(255,255,255,0.1);
      margin: 10px auto;
      padding: 15px;
      border-radius: 12px;
      width: 90%;
      max-width: 400px;
    }
    input[type="number"] {
      width: 60px;
      padding: 6px;
      border-radius: 6px;
      font-size: 16px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>üì± EKRAN.TJ-KBS</h1>
  <div id="main-menu">
    <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:</p>
    <button class="btn" onclick="selectCategory('Samsung')">üì± Samsung</button>
    <button class="btn" onclick="selectCategory('iPhone')">üçè iPhone</button>
    <button class="btn" onclick="alert('–°–∫–æ—Ä–æ –¥–∞—Å—Ç—Ä–∞—Å –º–µ—à–∞–≤–∞–¥')">üî¥ Redmi</button>
    <button class="btn" onclick="alert('–°–∫–æ—Ä–æ –¥–∞—Å—Ç—Ä–∞—Å –º–µ—à–∞–≤–∞–¥')">üü¢ Realmi</button>
    <button class="btn" onclick="alert('–°–∫–æ—Ä–æ –¥–∞—Å—Ç—Ä–∞—Å –º–µ—à–∞–≤–∞–¥')">üîµ Huawei</button>
  </div>

  <div id="quality-menu" style="display:none;"></div>
  <div id="model-list" style="display:none;"></div>
  <button class="btn" id="submitOrder" style="display:none;" onclick="submitOrder()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>

  <script>
    const catalog = {
      Samsung: {
        Original: [
          { name: "Samsung A10", brand: "KBS", price: "90" },
          { name: "Samsung A11", brand: "KBS", price: "120" },
          { name: "Samsung A12", brand: "KBS", price: "90" }
        ],
        Incell: [
          { name: "Samsung A20", brand: "KBS", price: "110" },
          { name: "Samsung A21s", brand: "KBS", price: "120" }
        ]
      },
      iPhone: {
        OLED: [
          { name: "iPhone X", brand: "KBS", price: "160" },
          { name: "iPhone XS", brand: "KBS", price: "160" },
          { name: "iPhone XS Max", brand: "KBS", price: "170" }
        ],
        Incell: [
          { name: "iPhone XR", brand: "KBS", price: "130" },
          { name: "iPhone 11", brand: "KBS", price: "140" }
        ]
      }
    };

    let selectedCategory = "";
    let selectedItems = [];

    function selectCategory(cat) {
      selectedCategory = cat;
      const qualityMenu = document.getElementById("quality-menu");
      qualityMenu.innerHTML = `<h2>${cat}</h2>`;
      Object.keys(catalog[cat]).forEach(q => {
        qualityMenu.innerHTML += `<button class="btn" onclick="showModels('${cat}','${q}')">${q}</button>`;
      });
      document.getElementById("main-menu").style.display = "none";
      qualityMenu.style.display = "block";
    }

    function showModels(cat, quality) {
      const modelList = document.getElementById("model-list");
      modelList.innerHTML = `<h3>${cat} - ${quality}</h3>`;
      catalog[cat][quality].forEach((item, idx) => {
        const id = `${cat}_${quality}_${idx}`;
        modelList.innerHTML += `
          <div class="card">
            <strong>${item.name}</strong><br>
            üè∑ –ë—Ä–µ–Ω–¥: ${item.brand}<br>
            üí∞ –¶–µ–Ω–∞: ${item.price} —Å–æ–º–æ–Ω”£<br>
            üî¢ –ö–æ–ª-–≤–æ: <input type="number" id="${id}" min="1" value="0"><br>
          </div>`;
      });
      modelList.style.display = "block";
      document.getElementById("submitOrder").style.display = "inline-block";
    }

    function submitOrder() {
      selectedItems = [];
      Object.keys(catalog).forEach(cat => {
        Object.keys(catalog[cat]).forEach(q => {
          catalog[cat][q].forEach((item, idx) => {
            const id = `${cat}_${q}_${idx}`;
            const qty = parseInt(document.getElementById(id)?.value || 0);
            if (qty > 0) {
              selectedItems.push({
                name: item.name,
                quality: q,
                brand: item.brand,
                price: item.price,
                quantity: qty
              });
            }
          });
        });
      });
      if (selectedItems.length === 0) {
        alert("‚ùó –í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä");
        return;
      }
      Telegram.WebApp.sendData(JSON.stringify(selectedItems));
    }
  </script>
</body>
</html>
